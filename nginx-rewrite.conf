autoindex on;
location /inc/ {
deny all;
}
error_page 404 "/openverse-php/errors/404.php";
error_page 403 "/openverse-php/errors/403.php";
error_page 500 "/openverse-php/errors/500.php";
error_page 503 "/openverse-php/errors/503.php";

rewrite ^/$ /openverse-php/community-list.php last;
rewrite ^/account/login$ /openverse-php/login.php last;
rewrite ^/account/logout$ /openverse-php/logout.php last;
rewrite ^/account/signup$ /openverse-php/signup.php last;
rewrite ^/account/forgot$ /openverse-php/forgot_password.php last;
rewrite ^/users/@me$ /openverse-php/me.php last;
rewrite ^/users/([^/]+)$ /openverse-php/user_profile.php?id=$1 last;
rewrite ^/users/([^/]+)/posts$ /openverse-php/user_posts.php?id=$1 last;
rewrite ^/users/([^/]+)/empathies$ /openverse-php/user_empathies.php?id=$1 last;
rewrite ^/users/([^/]+)/friends$ /openverse-php/user_friends.php?id=$1 last;
rewrite ^/users/([^/]+)/followers$ /openverse-php/user_followers.php?id=$1 last;
rewrite ^/users/([^/]+)/following$ /openverse-php/user_following.php?id=$1 last;
rewrite ^/users/([^/]+)/follow$ /openverse-php/follow.php?id=$1 last;
rewrite ^/users/([^/]+)/unfollow$ /openverse-php/unfollow.php?id=$1 last;
rewrite ^/users/([^/]+)/friend$ /openverse-php/friend_request.php?id=$1 last;
rewrite ^/users/([^/]+)/unfriend$ /openverse-php/remove_friend.php?id=$1 last;
rewrite ^/users/([^/]+)/favorites$ /openverse-php/user_favorites.php?id=$1 last;
rewrite ^/users$ /openverse-php/user_search.php last;
rewrite ^/identified_user_posts$ /openverse-php/identified_user_posts.php last;
rewrite ^/check_update.json(.*)?$ /openverse-php/check_update.php last;
rewrite ^/activity$ /openverse-php/activity.php last;
rewrite ^/news/my_news$ /openverse-php/notifications.php last;
rewrite ^/news/friend_requests$ /openverse-php/friendrequests.php last;
rewrite ^/messages$ /openverse-php/messages.php last;
rewrite ^/messages/([^/]+)$ /openverse-php/conversation.php?id=$1 last;
rewrite ^/communities/favorites$ /openverse-php/favorites.php last;
rewrite ^/titles/search$ /openverse-php/title_search.php last;
rewrite ^/titles/([0-9]+)$ /openverse-php/titles.php?id=$1 last;
rewrite ^/titles/([0-9]+)/([0-9]+)$ /openverse-php/communities.php?id=$2 last;
rewrite ^/titles/([0-9]+)/([0-9]+)/favorite$ /openverse-php/favorite.php?id=$2 last;
rewrite ^/titles/([0-9]+)/([0-9]+)/unfavorite$ /openverse-php/unfavorite.php?id=$2 last;
rewrite ^/titles/([0-9]+)/([0-9]+)/hot$ /openverse-php/popular_posts.php?id=$2 last;
rewrite ^/titles/([0-9]+)/([0-9]+)/hot/(.+)$ /openverse-php/popular_posts.php?id=$2&date=$3 last;
rewrite ^/posts/([0-9]+)/empathies$ /openverse-php/yeah_post.php?id=$1 last;
rewrite ^/posts/([0-9]+)/empathies.delete$ /openverse-php/delete_post_yeah.php?id=$1 last;
rewrite ^/posts/([0-9]+)/delete$ /openverse-php/delete_post.php?id=$1 last;
rewrite ^/posts/([0-9]+)/remove$ /openverse-php/remove_post.php?id=$1 last;
rewrite ^/posts/([0-9]+)/edit$ /openverse-php/edit_post.php?id=$1 last;
rewrite ^/posts/([0-9]+)/violations$ /openverse-php/report_post.php?id=$1 last;
rewrite ^/posts/([0-9]+)/favorite_screenshot$ /openverse-php/favorite_post_screenshot.php?id=$1 last;
rewrite ^/posts/([0-9]+)$ /openverse-php/posts.php?id=$1 last;
rewrite ^/posts/([0-9]+)/replies$ /openverse-php/reply.php?id=$1 last;
rewrite ^/posts$ /openverse-php/post.php last;
rewrite ^/replies/([0-9]+)/empathies$ /openverse-php/yeah_reply.php?id=$1 last;
rewrite ^/replies/([0-9]+)/empathies.delete$ /openverse-php/delete_reply_yeah.php?id=$1 last;
rewrite ^/replies/([0-9]+)/delete$ /openverse-php/delete_reply.php?id=$1 last;
rewrite ^/replies/([0-9]+)/remove$ /openverse-php/remove_reply.php?id=$1 last;
rewrite ^/replies/([0-9]+)/violations$ /openverse-php/report_reply.php?id=$1 last;
rewrite ^/replies/([0-9]+)$ /openverse-php/replies.php?id=$1 last;
rewrite ^/chat/([0-9]+)$ /openverse-php/chat.php?id=$1 last;
rewrite ^/guide/$ /openverse-php/guide/rules.php last;
rewrite ^/guide/legal$ /openverse-php/guide/legal.php last;
rewrite ^/guide/faq$ /openverse-php/guide/faq.php last;
rewrite ^/guide/terms$ /openverse-php/guide/terms.php last;
rewrite ^/settings/profile$ /openverse-php/profile_settings.php last;
rewrite ^/settings/account$ /openverse-php/account_settings.php last;
rewrite ^/admin$ /openverse-php/admin.php last;
rewrite ^/session/([^/]+)$ /openverse-php/admin/session.php?id=$1 last;
rewrite ^/debug.*$ /openverse-php/admin/tests.php last;
